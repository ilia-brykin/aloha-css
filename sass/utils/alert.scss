@import "aloha_prefix";
@import "vars_global";
@import "color_utils";

$alert-padding-y:               $spacer !default;
$alert-padding-x:               $spacer !default;
$alert-border-radius:           $border-radius !default;
$alert-link-font-weight:        $font-weight-bold !default;
$alert-border-width:            $border-width !default;
$alert-bg-scale:                -80% !default;
$alert-border-scale:            -70% !default;
$alert-color-scale:             40% !default;
$alert-dismissible-padding-r:   $alert-padding-x * 3 !default;


.#{$aloha-prefix}alert {
  --#{$aloha-prefix}alert_bg: transparent;
  --#{$aloha-prefix}alert_padding_x: 1rem;
  --#{$aloha-prefix}alert_padding_y: 1rem;
  --#{$aloha-prefix}alert_margin_bottom: 1rem;
  --#{$aloha-prefix}alert_color: inherit;
  --#{$aloha-prefix}alert_border_color: transparent;
  --#{$aloha-prefix}alert_border: var(--#{$aloha-prefix}border_width) solid var(--#{$aloha-prefix}alert_border_color);
  --#{$aloha-prefix}alert_border-radius: var(--#{$aloha-prefix}border_radius);
  --#{$aloha-prefix}alert_icon_size: 1.5rem;
  --#{$aloha-prefix}alert_icon_margin_right: .5rem;

  position: relative;
  padding: var(--#{$aloha-prefix}alert_padding_y) var(--#{$aloha-prefix}alert_padding_x);
  margin-bottom: var(--#{$aloha-prefix}alert_margin_bottom);
  color: var(--#{$aloha-prefix}alert_color);
  background-color: var(--#{$aloha-prefix}alert_bg);
  border: var(--#{$aloha-prefix}alert_border);
  border-radius: var(--#{$aloha-prefix}alert_border-radius);
  display: flex;
  align-items: center;

  .#{$aloha-prefix}alert__icon {
    width: var(--#{$aloha-prefix}alert_icon_size);
    height: var(--#{$aloha-prefix}alert_icon_size);
    margin-right: var(--#{$aloha-prefix}alert_icon_margin_right);
  }
}
.#{$aloha-prefix}alert_dismissible {
  padding-right: $alert-dismissible-padding-r;
  .#{$aloha-prefix}btn_close {
    position: absolute;
    top: 0;
    right: 0;
    z-index: $stretched-link-z-index + 1;
    padding: $alert-padding-y * 1.25 $alert-padding-x;
  }
}

.a_alert__content {
  width: 100%;
}

@each $state, $value in $theme-colors {
  $alert-background: shift-color($value, $alert-bg-scale);
  $alert-border: shift-color($value, $alert-border-scale);
  $alert-color: shift-color($value, $alert-color-scale);
  //@if (contrast-ratio($alert-background, $alert-color) < $min-contrast-ratio) {
  //  $alert-color: mix($value, color-contrast($alert-background), abs($alert-color-scale));
  //}
  .#{$aloha-prefix}alert_#{$state} {
    --#{$aloha-prefix}alert_color: #{$alert-color};
    --#{$aloha-prefix}alert_bg: #{$alert-background};
    --#{$aloha-prefix}alert_border_color: #{$alert-border};
  }
}
